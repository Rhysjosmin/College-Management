<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Login</title>
    <link rel="stylesheet" href="./style.css" />
    <link rel="stylesheet" href="../../../Styles/FontStyling.css" />
    <script src="../../../Scripts/Config.js"></script>
    <script type="module" src="https://1.www.s81c.com/common/carbon/web-components/version/v1.27.0/notification.min.js"></script>

  </head>
  <body>
    <div id="LoginWrapper">
      <h1 id="DBCEH1">Don Bosco College Of Engineering</h1>
      <div id="Login">
        <div>

          <div id="form">
            <input type="text" placeholder="Username" id="Username" />
            <input type="email" placeholder="Email" id="Email" />
            <input type="password" placeholder="Password" id="Password" />
            <button onclick="Login()">Login</button>
          </div>
        </div>
      </div>
    </div>
  </body>

  <script>
    function Login() {
      const Username_Value = document.getElementById("Username").value;
      const  Email_Value= document.getElementById("Email").value;
      const Password_Value = document.getElementById("Password").value;
if(Username_Value.replace(/ /g,'')=='' || Email_Value.replace(/ /g,'')=='' || Password_Value.replace(/ /g,'')==''){
  Notification('Incomplete Form','Recheck if you have filled all the entries','error')
}
if (!Email_Value.includes('dbcegoa.ac.in') && Email_Value.replace(/ /g,'')!='' && Username_Value.replace(/ /g,'')!='' && Password_Value.replace(/ /g,'')!='') {
  Notification('Email Error','Email Should Belong to dbcegoa.ac.in','error')
  return
}
      fetch(SERVER_URL + "Login/", {
        method: "POST",
        body: JSON.stringify({
          Username: Username_Value,
          Email: Email_Value,
          Password: Password_Value,
        }),
        headers: {
          "Content-type": "application/json",
        },
      })
      .then(resp=>resp.json())
      .then(response=>{
        console.log(response)
        if(response.Present=='True'){
          window.location.replace('../../'+response.UserType+'/?User='+Username_Value)
        }else{
        Notification('Error','Wrong Username Email Or Password','error')

        }
      }).catch((e)=>{
        Notification('Email Error',e,'error')

      })
     
    }
  </script>
</html>
